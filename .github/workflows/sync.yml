name: sync

on:
  workflow_dispatch:
  schedule:
    - cron: 0 0 * * *

permissions:
  contents: write
  pull-requests: write

jobs:
  generate-data:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3.0.2
      - run: ./ci/update-openstack-images-data
      - uses: peter-evans/create-pull-request@v4.1.1
        with:
          commit-message: Automated OpenStack project versions bump
          branch: auto/bump-openstack-refs
          delete-branch: true
          title: Automatic bump of OpenStack project versions
          body: |
            This is an automatic bump of OpenStack project versions in order to
            make sure that we always have the latest images available.  This
            should be merged once all images build successfully.
          assignees: |
            mnaser
          reviewers: |
            mnaser
