{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["local>vexxhost/.github"],
  "baseBranches": ["main", "/^stable\\/.*/"],
  "addLabels": ["skip-release-notes"],
  "prHourlyLimit": 10,
  "packageRules": [
    {
      "enabled": false,
      "matchDepNames": ["*"]
    },
    {
      "matchDatasources": ["docker"],
      "pinDigests": true
    },
    {
      "enabled": true,
      "groupName": "vexxhost images",
      "matchDepPatterns": ["^ghcr\\.io/vexxhost/"]
    },
    {
      "matchDepPatterns": ["^ghcr\\.io/vexxhost/"],
      "matchUpdateTypes": ["major", "minor", "patch", "pin", "bump", "rollback", "replacement"],
      "enabled": false
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": ["roles/defaults/vars/main.yml"],
      "matchStrings": [
        "(?<prefix>\\{\\{ atmosphere_image_prefix \\}\\})(?<depName>[^:]+):(?<currentValue>[^@\\s\"]+)(@(?<currentDigest>sha256:[a-f0-9]+))?"
      ],
      "autoReplaceStringTemplate": "\\{{ atmosphere_image_prefix }}{{{depName}}}:{{{newValue}}}@{{{newDigest}}}",
      "datasourceTemplate": "docker"
    }
  ]
}
